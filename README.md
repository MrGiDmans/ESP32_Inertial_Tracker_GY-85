# ESP32 Inertial Tracker (GY-85)

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∏–Ω–µ—Ä—Ü–∏–æ–Ω–Ω—ã–π —Ç—Ä–µ–∫–µ—Ä –Ω–∞ –±–∞–∑–µ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ **ESP32** –∏ –¥–∞—Ç—á–∏–∫–∞ **GY-85**, –≤–∫–ª—é—á–∞—é—â–µ–≥–æ –∞–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä (ADXL345), –≥–∏—Ä–æ—Å–∫–æ–ø (ITG3200) –∏ –º–∞–≥–Ω–∏—Ç–æ–º–µ—Ç—Ä (HMC5883L). –¢—Ä–µ–∫–µ—Ä –≤—ã—á–∏—Å–ª—è–µ—Ç —É–≥–ª—ã **Roll**, **Pitch** –∏ **Yaw** –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç –∏—Ö –ø–æ **UDP** –Ω–∞ –ü–ö. –¢–∞–∫–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –¥–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω–∞—è –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞.

## üß† –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä–∞, –≥–∏—Ä–æ—Å–∫–æ–ø–∞ –∏ –º–∞–≥–Ω–∏—Ç–æ–º–µ—Ç—Ä–∞.
- –ö–æ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —É–≥–ª–æ–≤ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏.
- –†–∞–±–æ—Ç–∞ –≤ –¥–≤—É—Ö —Ä–µ–∂–∏–º–∞—Ö: **–æ–±—ã—á–Ω—ã–π** –∏ **—Ç–æ—á–Ω—ã–π** (–±–µ–∑ –∏–Ω–µ—Ä—Ü–∏–∏).
- –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ **UDP**.
- –ü—Ä–∏—ë–º —É–ø—Ä–∞–≤–ª—è—é—â–∏—Ö –∫–æ–º–∞–Ω–¥ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ–º—É UDP-–ø–æ—Ä—Ç—É.
- EEPROM-–ø–∞–º—è—Ç—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –æ—Ñ—Ñ—Å–µ—Ç–æ–≤ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏.
- –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–æ—Ç–æ–∫–æ–ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (—Å—Ç–∞—Ä—Ç/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏, –≤–∫–ª—é—á–µ–Ω–∏–µ —Ç–æ—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞).

## ‚öôÔ∏è –ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- **ESP32 DevKit v1**
- **GY-85** IMU (I2C):
  - ADXL345 (–∞–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä)
  - ITG3200 (–≥–∏—Ä–æ—Å–∫–æ–ø)
  - HMC5883L (–º–∞–≥–Ω–∏—Ç–æ–º–µ—Ç—Ä)
- –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ I2C: `SDA ‚Äî GPIO22`, `SCL ‚Äî GPIO23`

## üì° Wi-Fi –∏ UDP

ESP32 –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ —Ç–æ—á–∫–∏ –¥–æ—Å—Ç—É–ø–∞:

- SSID: `ESP32_Tracker`
- –ü–∞—Ä–æ–ª—å: `123456789`
- IP ESP32: `192.168.4.1`
- IP –ü–ö (–∫–ª–∏–µ–Ω—Ç–∞): `192.168.4.2` *(–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ –∫–æ–¥–µ)*

–ü–æ—Ä—Ç—ã:

- –ü–µ—Ä–µ–¥–∞—á–∞ —É–≥–ª–æ–≤: `12345`
- –ü—Ä–∏—ë–º –∫–æ–º–∞–Ω–¥: `12346`

## üì¶ –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö

ESP32 –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Ç—Ä–æ–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∞:

```
ROLL:10.5,PITCH:-3.2,YAW:125.0
```

## üßæ –£–ø—Ä–∞–≤–ª—è—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã (—á–µ—Ä–µ–∑ UDP –Ω–∞ –ø–æ—Ä—Ç 12346)

| –ö–æ–º–∞–Ω–¥–∞             | –û–ø–∏—Å–∞–Ω–∏–µ                                  |
|---------------------|--------------------------------------------|
| `start_calibrate_gyro` | –ù–∞—á–∞—Ç—å –∫–∞–ª–∏–±—Ä–æ–≤–∫—É –≥–∏—Ä–æ—Å–∫–æ–ø–∞              |
| `start_calibrate_mag`  | –ù–∞—á–∞—Ç—å –∫–∞–ª–∏–±—Ä–æ–≤–∫—É –º–∞–≥–Ω–∏—Ç–æ–º–µ—Ç—Ä–∞           |
| `set_precise 1`        | –í–∫–ª—é—á–∏—Ç—å —Ç–æ—á–Ω—ã–π —Ä–µ–∂–∏–º (–±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞)      |
| `set_precise 0`        | –í—ã–∫–ª—é—á–∏—Ç—å —Ç–æ—á–Ω—ã–π —Ä–µ–∂–∏–º                   |

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏ ESP32 –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç:

- `end_calibrate_gyro`
- `end_calibrate_mag`

## üß™ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

1. –£—Å—Ç–∞–Ω–æ–≤–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:

- [Adafruit ADXL345](https://github.com/adafruit/Adafruit_ADXL345)
- [Adafruit HMC5883](https://github.com/adafruit/Adafruit_HMC5883_Unified)
- [I2Cdevlib + ITG3200](https://github.com/jrowberg/i2cdevlib)
- `EEPROM`, `WiFi`, `WiFiUDP` (–≤—Ö–æ–¥—è—Ç –≤ ESP32 SDK)

2. –£–∫–∞–∂–∏ —Å–≤–æ–π IP-–∞–¥—Ä–µ—Å –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π:

```cpp
IPAddress remote_ip(192, 168, 4, 2);
```

3. –ó–∞–ª–µ–π –∫–æ–¥ –Ω–∞ ESP32.

4. –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ Wi-Fi —Å–µ—Ç–∏ `ESP32_Tracker`.

5. –û—Ç–ø—Ä–∞–≤–ª—è–π UDP-–∫–æ–º–∞–Ω–¥—ã –∏ –ø–æ–ª—É—á–∞–π –¥–∞–Ω–Ω—ã–µ.

## üõ†Ô∏è EEPROM

–ö–∞–ª–∏–±—Ä–æ–≤–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ EEPROM:

- `gyro_offset_x/y/z`
- `mag_offset_x/y/z`

–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ "–º–∞–≥–∏—á–µ—Å–∫–æ–≥–æ —á–∏—Å–ª–∞" `0xA5A5`.

## üìà –ê–ª–≥–æ—Ä–∏—Ç–º —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

–í –æ–±—ã—á–Ω–æ–º —Ä–µ–∂–∏–º–µ:
- –£–≥–ª—ã Roll –∏ Pitch: **–∞–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä + –≥–∏—Ä–æ—Å–∫–æ–ø (–∫–æ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä)**.
- –£–≥–æ–ª Yaw: **–≥–∏—Ä–æ—Å–∫–æ–ø + –º–∞–≥–Ω–∏—Ç–æ–º–µ—Ç—Ä** —Å –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–µ–π –Ω–∞–∫–ª–æ–Ω–∞.

–í —Ç–æ—á–Ω–æ–º —Ä–µ–∂–∏–º–µ:
- –¢–æ–ª—å–∫–æ –∞–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä –∏ –º–∞–≥–Ω–∏—Ç–æ–º–µ—Ç—Ä.

## üßπ –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞

- **–ì–∏—Ä–æ—Å–∫–æ–ø**: —É—Å—Ä–µ–¥–Ω–µ–Ω–∏–µ 500 —Å—ç–º–ø–ª–æ–≤.
- **–ú–∞–≥–Ω–∏—Ç–æ–º–µ—Ç—Ä**: —Å–±–æ—Ä –º–∞–∫—Å–∏–º—É–º–æ–≤/–º–∏–Ω–∏–º—É–º–æ–≤ –≤ —Ç–µ—á–µ–Ω–∏–µ 10 —Å–µ–∫—É–Ω–¥.

–í –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ EEPROM.

## üì∑ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–∞ –ü–ö (Python)

```python
import socket

sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
sock.bind(("0.0.0.0", 12345))

while True:
    data, _ = sock.recvfrom(1024)
    print(data.decode())
```

## üìå –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è —Å–≤–æ–±–æ–¥–Ω–æ –≤ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª—è—Ö.

---

üõ† –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–ª—è –∫—É—Ä—Å–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º.
